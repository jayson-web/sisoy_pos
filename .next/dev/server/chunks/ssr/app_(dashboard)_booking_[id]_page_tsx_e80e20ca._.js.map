{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jayso/pos_sisoy/app/%28dashboard%29/booking/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { useRouter, useParams } from \"next/navigation\"\r\nimport { storage, type Booking } from \"@/lib/storage\"\r\n\r\ninterface ModalState {\r\n  isOpen: boolean\r\n  type: \"success\" | \"error\" | \"confirm\" | null\r\n  title: string\r\n  message: string\r\n  action?: () => void\r\n}\r\n\r\nexport default function BookingDetailsPage() {\r\n  const router = useRouter()\r\n  const params = useParams()\r\n  const bookingId = params.id as string\r\n  const [booking, setBooking] = useState<Booking | null>(null)\r\n  const [modal, setModal] = useState<ModalState>({\r\n    isOpen: false,\r\n    type: null,\r\n    title: \"\",\r\n    message: \"\",\r\n  })\r\n\r\n  useEffect(() => {\r\n    const b = storage.getBookings().find((b) => b.id === bookingId)\r\n    setBooking(b || null)\r\n  }, [bookingId])\r\n\r\n  if (!booking) return <div className=\"text-center py-12\">Loading...</div>\r\n\r\n  const client = storage.getClients().find((c) => c.id === booking.clientId)\r\n  const customerName = (booking as any).customerName || `${client?.firstName || ''} ${client?.lastName || ''}`.trim()\r\n  const accommodation = storage.getAccommodations().find((a) => a.id === booking.accommodationId)\r\n\r\n  const nights = Math.floor(\r\n    (new Date(booking.dateTo).getTime() - new Date(booking.dateFrom).getTime()) / (1000 * 60 * 60 * 24),\r\n  )\r\n\r\n  const handleStatusChange = (newStatus: string) => {\r\n    setModal({\r\n      isOpen: true,\r\n      type: \"confirm\",\r\n      title: \"Update Booking Status\",\r\n      message: `Change status from \"${booking?.status}\" to \"${newStatus}\"?`,\r\n      action: () => {\r\n        storage.updateBooking(bookingId, { status: newStatus as any })\r\n        setBooking({ ...booking!, status: newStatus as any })\r\n        setModal({\r\n          isOpen: true,\r\n          type: \"success\",\r\n          title: \"Success\",\r\n          message: `Booking status updated to ${newStatus}`,\r\n        })\r\n      },\r\n    })\r\n  }\r\n\r\n  const handlePaymentStatus = () => {\r\n    setModal({\r\n      isOpen: true,\r\n      type: \"confirm\",\r\n      title: \"Mark as Paid\",\r\n      message: \"Are you sure you want to mark this booking as paid?\",\r\n      action: () => {\r\n        storage.updateBooking(bookingId, {\r\n          paymentStatus: \"paid\",\r\n          transactionId: `TEST${Date.now()}`,\r\n        })\r\n        setBooking({ ...booking!, paymentStatus: \"paid\", transactionId: `TEST${Date.now()}` })\r\n        setModal({\r\n          isOpen: true,\r\n          type: \"success\",\r\n          title: \"Success\",\r\n          message: \"Booking marked as paid\",\r\n        })\r\n      },\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h1 className=\"text-3xl font-bold text-(--primary-blue)\">Booking Details</h1>\r\n        <button\r\n          onClick={() => window.print()}\r\n          className=\"px-4 py-2 bg-(--primary-blue) text-white rounded font-bold hover:bg-blue-900\"\r\n        >\r\n          Print Receipt\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-6\">\r\n        {/* Left - Booking Info */}\r\n        <div className=\"bg-white border border-(--gray-light) rounded p-6 space-y-6\">\r\n          <div>\r\n            <h3 className=\"font-bold text-(--gray-dark) mb-3\">Customer Information</h3>\r\n            <div className=\"space-y-2 text-sm text-(--gray-dark)\">\r\n              <p>\r\n                <strong>Name:</strong> {customerName || 'N/A'}\r\n              </p>\r\n              <p>\r\n                <strong>Email:</strong> {client?.email}\r\n              </p>\r\n              <p>\r\n                <strong>Phone:</strong> {client?.phoneNumber}\r\n              </p>\r\n              <p>\r\n                <strong>Address:</strong> {client?.address || \"N/A\"}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <h3 className=\"font-bold text-(--gray-dark) mb-3\">Accommodation</h3>\r\n            <div className=\"space-y-2 text-sm text-(--gray-dark)\">\r\n              <p>\r\n                <strong>Name:</strong> {accommodation?.name}\r\n              </p>\r\n              <p>\r\n                <strong>Type:</strong> {accommodation?.type}\r\n              </p>\r\n              <p>\r\n                <strong>Capacity:</strong> {accommodation?.capacity} guests\r\n              </p>\r\n              <p>\r\n                <strong>Description:</strong> {accommodation?.description}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <h3 className=\"font-bold text-(--gray-dark) mb-3\">Dates</h3>\r\n            <div className=\"space-y-2 text-sm text-(--gray-dark)\">\r\n              <p>\r\n                <strong>Check-in:</strong> {booking.dateFrom}\r\n              </p>\r\n              <p>\r\n                <strong>Check-out:</strong> {booking.dateTo}\r\n              </p>\r\n              <p>\r\n                <strong>Nights:</strong> {nights}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right - Billing & Actions */}\r\n        <div className=\"space-y-6\">\r\n          {/* Billing */}\r\n          <div className=\"bg-white border border-(--gray-light) rounded p-6\">\r\n            <h3 className=\"font-bold text-(--gray-dark) mb-4\">Billing</h3>\r\n            <div className=\"space-y-2 text-sm mb-4 border-b border-(--gray-light) pb-4\">\r\n              <div className=\"flex justify-between\">\r\n                <span>Rate per night:</span>\r\n                <span className=\"font-bold\">₱{accommodation?.pricePerNight}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span>Nights:</span>\r\n                <span className=\"font-bold\">{nights}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-lg font-bold\">\r\n                <span>Total:</span>\r\n                <span className=\"text-(--primary-blue)\">₱{booking.totalAmount.toLocaleString()}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-sm\">\r\n              <p className=\"text-(--gray-dark) mb-2\">\r\n                <strong>Payment Status:</strong>\r\n              </p>\r\n              <div className=\"flex gap-2\">\r\n                <span\r\n                  className={`px-3 py-1 rounded font-bold ${\r\n                    booking.paymentStatus === \"paid\" ? \"bg-green-100 text-green\" : \"bg-yellow-100 text-yellow-800\"\r\n                  }`}\r\n                >\r\n                  {booking.paymentStatus === \"paid\" ? \"✓ Paid\" : \"Unpaid\"}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Status & Actions */}\r\n          <div className=\"bg-white border border-(--gray-light) rounded p-6 space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-bold text-(--gray-dark) mb-2\">Status</label>\r\n              <select\r\n                value={booking.status}\r\n                onChange={(e) => handleStatusChange(e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-(--gray-light) rounded\"\r\n              >\r\n                <option value=\"pending\">Pending</option>\r\n                <option value=\"confirmed\">Confirmed</option>\r\n                <option value=\"completed\">Completed</option>\r\n                <option value=\"cancelled\">Cancelled</option>\r\n              </select>\r\n            </div>\r\n\r\n            <button\r\n              onClick={handlePaymentStatus}\r\n              disabled={booking.paymentStatus === \"paid\"}\r\n              className=\"w-full py-2 bg-(--yellow) text-(--gray-dark) rounded font-bold hover:bg-yellow-400 disabled:opacity-50\"\r\n            >\r\n              {booking.paymentStatus === \"paid\" ? \"Already Paid\" : \"Mark as Paid\"}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => router.push(\"/bookings\")}\r\n              className=\"w-full py-2 bg-(--primary-blue) text-white rounded font-bold hover:bg-blue-900\"\r\n            >\r\n              Back to Bookings\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      {modal.isOpen && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className={`bg-white rounded-lg p-6 max-w-sm w-full shadow-lg border-l-4 ${\r\n            modal.type === \"confirm\" ? \"border-blue-500\" : modal.type === \"success\" ? \"border-green-500\" : \"border-red-500\"\r\n          }`}>\r\n            <h2 className={`text-lg font-bold mb-2 ${\r\n              modal.type === \"confirm\" ? \"text-blue-600\" : modal.type === \"success\" ? \"text-green-600\" : \"text-red-600\"\r\n            }`}>\r\n              {modal.title}\r\n            </h2>\r\n            <p className=\"text-gray-700 mb-6\">{modal.message}</p>\r\n            <div className=\"flex gap-3\">\r\n              {modal.type === \"confirm\" ? (\r\n                <>\r\n                  <button\r\n                    onClick={modal.action}\r\n                    className=\"flex-1 py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 transition-colors\"\r\n                  >\r\n                    Yes\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setModal({ ...modal, isOpen: false })}\r\n                    className=\"flex-1 py-2 bg-gray-300 text-gray-800 rounded font-bold hover:bg-gray-400 transition-colors\"\r\n                  >\r\n                    No\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <button\r\n                  onClick={() => setModal({ ...modal, isOpen: false })}\r\n                  className=\"w-full py-2 bg-(--primary-blue) text-white rounded font-bold hover:bg-blue-900 transition-colors\"\r\n                >\r\n                  Close\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}